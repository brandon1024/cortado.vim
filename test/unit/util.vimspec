Describe util
	Describe #Flatten
		It should flatten up to maxdepth
			let l:result = java_support#util#Flatten([[1,[2,3,4],5],[6,7,[[[8]]]]], 3)
			Assert Equals(len(l:result), 8)

			" flattened ones
			for i in range(7)
				Assert Equals(l:result[i], i + 1)
			endfor

			" last one is too nested
			Assert Equals(l:result[7], [8])
		End

		It should flatten entire list if no maxdepth given
			let l:result = java_support#util#Flatten([[1,[2,3,4],5],[6,7,[[[8]]]]])
			Assert Equals(len(l:result), 8)
			for i in range(8)
				Assert Equals(l:result[i], i + 1)
			endfor
		End
	End

	Describe #Reduce
		It should reduce values using the first value as the intial value if not provided
			let l:result = java_support#util#Reduce([1, 3, 5], { acc, val -> acc + val })
			Assert Equals(l:result, 9)
		End

		It should reduce values using the initial value if provided
			let l:result = java_support#util#Reduce(['x', 'y'], { acc, val -> acc .. val }, 'a')
			Assert Equals(l:result, 'axy')
		End

		It should throw error if list is empty and no initial value provided
			Throws /^bug/ java_support#util#Reduce([], { acc, val -> acc + val })
		End

		It should throw error if too many arguments are given
			Throws /^bug/ java_support#util#Reduce(['x', 'y'], { acc, val -> acc .. val }, 'a', 'b')
		End
	End
End
